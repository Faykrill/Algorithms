D = [[0, 10, 18, 8, 999, 999], [10, 0, 16, 9, 21, 999], [999, 16, 0, 999, 999, 15], [7, 9, 999, 0, 999, 12], [999, 999, 999, 999, 0, 23], [999, 999, 15, 999, 23, 0]]
n = 6
W = D
print("Начальная матрица: ")
for ch in D:
    print(ch)

for k in range(0, n): #Кол-во матриц
    for i in range(0, n): # i-я строка
        for j in range(0, n): # j-й столбец
            W[i][j] = min(D[i][j], D[i][k]+D[k][j])

print("\nКонечная матрица: ")
for h in W:
    print(h)
